file.remove("clean.Rmd")
Summer_2020_NC_Protests$EVENT_DATE
Install_Load_Packages <- function(require){
if (!require(xlsx)) {
install.packages("xlsx")
library(xlsx)
}
if (!require(stringr)) {
install.packages("stringr")
library(stringr)
}
if (!require(ggplot2)) {
install.packages("ggplot2")
library(ggplot2)
}
if (!require(regex)) {
install.packages("regex")
library(regex)
}
All_Protests <- readxl::read_xlsx("USA_2020_2021_Apr02.xlsx")
# Cursory Overview:
names(All_Protests)
head(All_Protests)
unique(All_Protests$ADMIN1)
# Out of curiosity
table(All_Protests$ADMIN1)
# Subset to only include North Carolina Data from Summer 2020
All_NC_Protests <- subset(All_Protests,
All_Protests$ADMIN1 == "North Carolina")
Summer_2020_NC_Protests <- subset(All_NC_Protests,
All_NC_Protests$EVENT_DATE > "2020-6-01" &
All_NC_Protests$EVENT_DATE < "2020-08-31")
Summer_2020_NC_Protests$EVENT_DATE
Summer_2020_NC_Protests <- subset(All_NC_Protests,
All_NC_Protests$EVENT_DATE >= "2020-6-01" &
All_NC_Protests$EVENT_DATE <= "2020-08-31")
Summer_2020_NC_Protests$EVENT_DATE
Summer_2020_NC_Protests['Est_Protest_Size'] <- NA
Install_Load_Packages <- function(require){
if (!require(xlsx)) {
install.packages("xlsx")
library(xlsx)
}
if (!require(stringr)) {
install.packages("stringr")
library(stringr)
}
if (!require(ggplot2)) {
install.packages("ggplot2")
library(ggplot2)
}
if (!require(regex)) {
install.packages("regex")
library(regex)
}
x <- stringr::str_split(sample_string, "size=")
sample_string <- as.character("On 5 June 2020, about 1000 UNC students supporting Black Lives Matter marched in Chapel Hill (Orange, North Carolina) against police brutality. [size=around 1000]")
stringr::str_detect(sample_string, "size=")
x <- stringr::str_split(sample_string, "size=")
x
size <- stringr::str_detect(sample_string, "size=")
size
sample_string <- as.character("On 5 June 2020, about 1000 UNC students supporting Black Lives Matter marched in Chapel Hill (Orange, North Carolina) against police brutality. [size=around 1000]")
size <- stringr::str_extract(sample_string, "size=[:digit]")
size
size <- stringr::str_extract(sample_string, "size=")
size
View(Summer_2020_NC_Protests)
file.create("plot1.R")
size <- stringr::str_extract(sample_string, "size=[]")
size
size <- stringr::str_extract(sample_string, "\size=[:digit]")
size
size <- stringr::str_extract(sample_string, "\size=\w")
size
library(regex)
library(re)
install.packages(regex)
install.packages(re)
library(rex)
library(stringr)
split1 <- str_extract(sample_string, regex("?<=\[size:)[^\]]+)"))
split1
split1 <- str_extract(sample_string, regex("?<=\size:)[^\]+)"))
split1
split1 <- str_extract(sample_string, regex("?<=\ size:)[^\]+)"))
split1
split1 <- str_extract(sample_string, regex("?<=\ size:)"))
split1
Summer_2020_NC_Protests$ISO[1:2]
Summer_2020_NC_Protests$EVENT_DATE[1]
Summer_2020_NC_Protests$EVENT_DATE[1] <- "2020-06-03"
Summer_2020_NC_Protests$EVENT_DATE[1]
library(dplyr)
library(stringr)
Install_Load_Packages <- function(require){
if (!require(xlsx)) {
install.packages("xlsx")
library(xlsx)
}
if (!require(stringr)) {
install.packages("stringr")
library(stringr)
}
if (!require(ggplot2)) {
install.packages("ggplot2")
library(ggplot2)
}
if (!require(regex)) {
install.packages("regex")
library(regex)
}
All_Protests <- readxl::read_xlsx("USA_2020_2021_Apr02.xlsx")
# Cursory Overview:
names(All_Protests)
head(All_Protests)
unique(All_Protests$ADMIN1)
# Out of curiosity
table(All_Protests$ADMIN1)
# Subset to only include North Carolina Data from Summer 2020
All_NC_Protests <- subset(All_Protests,
All_Protests$ADMIN1 == "North Carolina")
Summer_2020_NC_Protests <- subset(All_NC_Protests,
All_NC_Protests$EVENT_DATE >= "2020-6-01" &
All_NC_Protests$EVENT_DATE <= "2020-08-31")
Summer_2020_NC_Protests$EVENT_DATE
# Now that we have our large dataframe subset to the observations over the
# summer of 2020 (06/01/2020 to 08/31/2020) we need to:
# 1.) Collapse observations
# 2.) Create observations for est amount of protesters
# Create new empty column in our Dataframe called "Est_Protest_Size"
Summer_2020_NC_Protests['Est_Protest_Size'] <- NA
# Loop through the Notes Section and find the estimated size per protest,
# put that finding into the empty column Est_Protest_Size
Summer_2020_NC_Protests$EVENT_DATE[1] <- "2020-06-03"
Summer_2020_NC_Protests$EVENT_DATE[1]
All_Protests <- readxl::read_xlsx("USA_2020_2021_Apr02.xlsx")
# Cursory Overview:
names(All_Protests)
head(All_Protests)
unique(All_Protests$ADMIN1)
# Out of curiosity
table(All_Protests$ADMIN1)
# Subset to only include North Carolina Data from Summer 2020
All_NC_Protests <- subset(All_Protests,
All_Protests$ADMIN1 == "North Carolina")
Summer_2020_NC_Protests <- subset(All_NC_Protests,
All_NC_Protests$EVENT_DATE >= "2020-6-01" &
All_NC_Protests$EVENT_DATE <= "2020-08-31")
Summer_2020_NC_Protests$EVENT_DATE
Summer_2020_NC_Protests['Est_Protest_Size'] <- NA
Install_Load_Packages <- function(require){
if (!require(xlsx)) {
install.packages("xlsx")
library(xlsx)
}
if (!require(stringr)) {
install.packages("stringr")
library(stringr)
}
if (!require(ggplot2)) {
install.packages("ggplot2")
library(ggplot2)
}
if (!require(dplyr)) {
install.packages("dplyr")
library(dplyr)
}
Summer_2020_NC_Protests$Est_Protest_Size <- Summer_2020_NC_Protests$NOTES
for (i in 1:ncol(Summer_2020_NC_Protests$NOTES)) {
Summer_2020_NC_Protests$Est_Protest_Size[,i] <- mutate(Est_Protest_Size =
trimws(str_extract(Summer_2020_NC_Protests$NOTES,
'(?<=size=)[^\\]]+')))
}
Summer_2020_NC_Protests$Est_Protest_Size
Summer_2020_NC_Protests$Est_Protest_Size <- Summer_2020_NC_Protests$NOTES
for (i in 1:ncol(Summer_2020_NC_Protests$NOTES)) {
Summer_2020_NC_Protests$Est_Protest_Size[,i] <- Summer_2020_NC_Protests %>%
mutate(Est_Protest_Size = trimws(str_extract(Summer_2020_NC_Protests$NOTES,
'(?<=size=)[^\\]]+')))
}
Summer_2020_NC_Protests$Est_Protest_Size
file.create("test1.R")
df <- structure(list(notes = c("On 5 June, some people walked down the street in this area. [size=around 5]",
"On 6 June, some people rode bikes down the street in this area. [size= nearly 4]",
"On 7 June, some people walked into a grocery store in this area. [size= about 100]",
"On 10 July, an hundreds of people drank water from this fountain [size=hundreds]",
"on 15 August, an unreported amount of people drove their cars down the street. [size= no report]"
)), class = "data.frame", row.names = c(NA, -5L))
df <- df %>%
mutate(est_size = trimws(str_extract(notes, '(?<=size=)[^\\]]+')))
df$est_size
df
?mutate
remove(Summer_2020_NC_Protests$Est_Protest_Size)
Summer_2020_NC_Protests <- Summer_2020_NC_Protests %>%
mutate(Est_Protest_Size = trimws(str_extract(Summer_2020_NC_Protests$NOTES,
'(?<=size=)[^\\]]+')))
Summer_2020_NC_Protests$Est_Protest_Size
table(Summer_2020_NC_Protests$Est_Protest_Size)
